<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <defs>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1677ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0958d9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#52c41a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#389e0d;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fa8c16;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d46b08;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#722ed1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#531dab;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#f5f7fa"/>
  
  <!-- Title -->
  <text x="600" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1f1f1f">UniMessage ç»Ÿä¸€æ¶ˆæ¯å¹³å° - ç³»ç»Ÿæ¶æ„å›¾</text>
  
  <!-- Client Layer -->
  <g transform="translate(50, 70)">
    <rect x="0" y="0" width="200" height="120" rx="8" fill="url(#blueGrad)" filter="url(#shadow)"/>
    <text x="100" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">å®¢æˆ·ç«¯åº”ç”¨</text>
    <text x="100" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">è®¢å•ç³»ç»Ÿ</text>
    <text x="100" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">ç”¨æˆ·ä¸­å¿ƒ</text>
    <text x="100" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">è¥é”€å¹³å°</text>
    <text x="100" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">ç›‘æ§å‘Šè­¦</text>
  </g>
  
  <!-- SDK -->
  <g transform="translate(50, 210)">
    <rect x="0" y="0" width="200" height="60" rx="8" fill="#e6f4ff" stroke="#1677ff" stroke-width="2" filter="url(#shadow)"/>
    <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1677ff">message-api (SDK)</text>
    <text x="100" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">UniMessageClient</text>
  </g>
  
  <!-- Arrow from SDK to Server -->
  <path d="M 250 240 L 320 240" stroke="#1677ff" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
  <defs>
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#1677ff"/>
    </marker>
  </defs>
  <text x="285" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">HTTP</text>
  
  <!-- Message Server -->
  <g transform="translate(330, 80)">
    <rect x="0" y="0" width="500" height="400" rx="10" fill="white" stroke="#d9d9d9" stroke-width="2" filter="url(#shadow)"/>
    <text x="250" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1f1f1f">message-server (æ ¸å¿ƒæœåŠ¡)</text>
    
    <!-- Controller Layer -->
    <g transform="translate(20, 45)">
      <rect x="0" y="0" width="460" height="50" rx="6" fill="#f6ffed" stroke="#52c41a" stroke-width="1"/>
      <text x="230" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#52c41a">Controller å±‚</text>
      <text x="230" y="38" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">MessageController | AuthController | TemplateController | ChannelController</text>
    </g>
    
    <!-- Service Layer -->
    <g transform="translate(20, 105)">
      <rect x="0" y="0" width="460" height="50" rx="6" fill="#fff7e6" stroke="#fa8c16" stroke-width="1"/>
      <text x="230" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fa8c16">Service å±‚</text>
      <text x="230" y="38" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">MessageService | TemplateService | ChannelService | RecipientService</text>
    </g>
    
    <!-- Handler Layer -->
    <g transform="translate(20, 165)">
      <rect x="0" y="0" width="460" height="80" rx="6" fill="#f9f0ff" stroke="#722ed1" stroke-width="1"/>
      <text x="230" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#722ed1">ChannelHandler æ¸ é“å¤„ç†å™¨ (ç­–ç•¥æ¨¡å¼)</text>
      <g transform="translate(10, 30)">
        <rect x="0" y="0" width="70" height="40" rx="4" fill="#722ed1"/>
        <text x="35" y="17" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">SMS</text>
        <text x="35" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">é˜¿é‡Œäº‘çŸ­ä¿¡</text>
      </g>
      <g transform="translate(85, 30)">
        <rect x="0" y="0" width="70" height="40" rx="4" fill="#722ed1"/>
        <text x="35" y="17" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">EMAIL</text>
        <text x="35" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">SMTPé‚®ä»¶</text>
      </g>
      <g transform="translate(160, 30)">
        <rect x="0" y="0" width="70" height="40" rx="4" fill="#722ed1"/>
        <text x="35" y="17" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">å¾®ä¿¡</text>
        <text x="35" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">æœåŠ¡å·/ä¼å¾®</text>
      </g>
      <g transform="translate(235, 30)">
        <rect x="0" y="0" width="70" height="40" rx="4" fill="#722ed1"/>
        <text x="35" y="17" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">é’‰é’‰</text>
        <text x="35" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">å·¥ä½œé€šçŸ¥</text>
      </g>
      <g transform="translate(310, 30)">
        <rect x="0" y="0" width="70" height="40" rx="4" fill="#722ed1"/>
        <text x="35" y="17" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="white">é£ä¹¦</text>
        <text x="35" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="white">æ¶ˆæ¯é€šçŸ¥</text>
      </g>
      <g transform="translate(385, 30)">
        <rect x="0" y="0" width="55" height="40" rx="4" fill="#d9d9d9"/>
        <text x="27" y="17" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">...</text>
        <text x="27" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#666">å¯æ‰©å±•</text>
      </g>
    </g>
    
    <!-- Mapper Layer -->
    <g transform="translate(20, 255)">
      <rect x="0" y="0" width="220" height="50" rx="6" fill="#e6f4ff" stroke="#1677ff" stroke-width="1"/>
      <text x="110" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1677ff">Mapper å±‚ (MyBatis Plus)</text>
      <text x="110" y="38" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">æ•°æ®è®¿é—®å±‚</text>
    </g>
    
    <!-- MQ Layer -->
    <g transform="translate(260, 255)">
      <rect x="0" y="0" width="220" height="50" rx="6" fill="#fff1f0" stroke="#ff4d4f" stroke-width="1"/>
      <text x="110" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ff4d4f">MQ æ¶ˆæ¯é˜Ÿåˆ—</text>
      <text x="110" y="38" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Kafka / RocketMQ</text>
    </g>
    
    <!-- Security -->
    <g transform="translate(20, 315)">
      <rect x="0" y="0" width="460" height="35" rx="6" fill="#fffbe6" stroke="#faad14" stroke-width="1"/>
      <text x="230" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#d48806">ğŸ” Sa-Token æƒé™è®¤è¯</text>
    </g>
    
    <!-- Tech Stack -->
    <g transform="translate(20, 360)">
      <text x="0" y="12" font-family="Arial, sans-serif" font-size="9" fill="#8c8c8c">æŠ€æœ¯æ ˆ: Spring Boot 3.3 | MyBatis Plus 3.5 | Redis | MySQL | Kafka/RocketMQ</text>
    </g>
  </g>
  
  <!-- Database -->
  <g transform="translate(330, 510)">
    <ellipse cx="100" cy="20" rx="90" ry="20" fill="url(#greenGrad)" filter="url(#shadow)"/>
    <rect x="10" y="20" width="180" height="60" fill="url(#greenGrad)"/>
    <ellipse cx="100" cy="80" rx="90" ry="20" fill="url(#greenGrad)"/>
    <ellipse cx="100" cy="20" rx="90" ry="20" fill="#52c41a"/>
    <text x="100" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">MySQL</text>
    <text x="100" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">unimessage</text>
  </g>
  
  <!-- Redis -->
  <g transform="translate(550, 510)">
    <rect x="0" y="0" width="140" height="80" rx="8" fill="#ff4d4f" filter="url(#shadow)"/>
    <text x="70" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Redis</text>
    <text x="70" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">ç¼“å­˜ / Token</text>
  </g>
  
  <!-- Arrow from Server to DB -->
  <path d="M 480 480 L 430 510" stroke="#52c41a" stroke-width="2" fill="none" marker-end="url(#arrowGreen)"/>
  <defs>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#52c41a"/>
    </marker>
  </defs>
  
  <!-- Arrow from Server to Redis -->
  <path d="M 580 480 L 620 510" stroke="#ff4d4f" stroke-width="2" fill="none" marker-end="url(#arrowRed)"/>
  <defs>
    <marker id="arrowRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ff4d4f"/>
    </marker>
  </defs>
  
  <!-- Frontend -->
  <g transform="translate(880, 80)">
    <rect x="0" y="0" width="270" height="200" rx="10" fill="white" stroke="#d9d9d9" stroke-width="2" filter="url(#shadow)"/>
    <text x="135" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1f1f1f">Frontend (ç®¡ç†åå°)</text>
    
    <g transform="translate(15, 40)">
      <rect x="0" y="0" width="240" height="35" rx="4" fill="#e6f4ff" stroke="#1677ff" stroke-width="1"/>
      <text x="120" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1677ff">React 19 + TypeScript + Vite</text>
    </g>
    
    <g transform="translate(15, 85)">
      <rect x="0" y="0" width="240" height="35" rx="4" fill="#f6ffed" stroke="#52c41a" stroke-width="1"/>
      <text x="120" y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#52c41a">Ant Design 6 + ECharts</text>
    </g>
    
    <g transform="translate(15, 130)">
      <rect x="0" y="0" width="115" height="55" rx="4" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1"/>
      <text x="57" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">é¡µé¢æ¨¡å—</text>
      <text x="57" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#8c8c8c">Dashboard</text>
      <text x="57" y="44" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#8c8c8c">æ¨¡æ¿/æ¸ é“/æ—¥å¿—</text>
    </g>
    
    <g transform="translate(140, 130)">
      <rect x="0" y="0" width="115" height="55" rx="4" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1"/>
      <text x="57" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">API å±‚</text>
      <text x="57" y="32" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#8c8c8c">Axios è¯·æ±‚</text>
      <text x="57" y="44" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#8c8c8c">Token æ‹¦æˆª</text>
    </g>
  </g>
  
  <!-- Arrow from Frontend to Server -->
  <path d="M 880 180 L 830 180" stroke="#1677ff" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
  <text x="855" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">REST API</text>
  
  <!-- Third Party Services -->
  <g transform="translate(880, 320)">
    <rect x="0" y="0" width="270" height="280" rx="10" fill="white" stroke="#d9d9d9" stroke-width="2" filter="url(#shadow)"/>
    <text x="135" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1f1f1f">ç¬¬ä¸‰æ–¹æœåŠ¡</text>
    
    <g transform="translate(15, 40)">
      <rect x="0" y="0" width="115" height="45" rx="4" fill="url(#orangeGrad)"/>
      <text x="57" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">é˜¿é‡Œäº‘</text>
      <text x="57" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">çŸ­ä¿¡æœåŠ¡</text>
    </g>
    
    <g transform="translate(140, 40)">
      <rect x="0" y="0" width="115" height="45" rx="4" fill="#1677ff"/>
      <text x="57" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">SMTP</text>
      <text x="57" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">é‚®ä»¶æœåŠ¡</text>
    </g>
    
    <g transform="translate(15, 95)">
      <rect x="0" y="0" width="115" height="45" rx="4" fill="#07c160"/>
      <text x="57" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">å¾®ä¿¡</text>
      <text x="57" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">æœåŠ¡å·/ä¼å¾®</text>
    </g>
    
    <g transform="translate(140, 95)">
      <rect x="0" y="0" width="115" height="45" rx="4" fill="#1677ff"/>
      <text x="57" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">é’‰é’‰</text>
      <text x="57" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">å·¥ä½œé€šçŸ¥</text>
    </g>
    
    <g transform="translate(15, 150)">
      <rect x="0" y="0" width="115" height="45" rx="4" fill="#3370ff"/>
      <text x="57" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="white">é£ä¹¦</text>
      <text x="57" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">æ¶ˆæ¯é€šçŸ¥</text>
    </g>
    
    <g transform="translate(140, 150)">
      <rect x="0" y="0" width="115" height="45" rx="4" fill="#d9d9d9"/>
      <text x="57" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#666">æ›´å¤šæ¸ é“</text>
      <text x="57" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">å¯æ‰©å±•...</text>
    </g>
    
    <!-- Data Flow Note -->
    <g transform="translate(15, 210)">
      <rect x="0" y="0" width="240" height="55" rx="4" fill="#f5f5f5" stroke="#d9d9d9" stroke-width="1"/>
      <text x="120" y="18" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#666">æ¸ é“å¤„ç†å™¨æ¨¡å¼</text>
      <text x="120" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#8c8c8c">ChannelHandler æ¥å£ç»Ÿä¸€æŠ½è±¡</text>
      <text x="120" y="48" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#8c8c8c">å·¥å‚æ¨¡å¼åŠ¨æ€è·¯ç”±åˆ°å…·ä½“å®ç°</text>
    </g>
  </g>
  
  <!-- Arrow from Server to Third Party -->
  <path d="M 830 280 L 880 350" stroke="#722ed1" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>
  <defs>
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#722ed1"/>
    </marker>
  </defs>
  <text x="870" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">SDKè°ƒç”¨</text>
  
  <!-- DB Tables -->
  <g transform="translate(330, 620)">
    <rect x="0" y="0" width="360" height="100" rx="6" fill="#f6ffed" stroke="#52c41a" stroke-width="1"/>
    <text x="180" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#52c41a">æ•°æ®åº“è¡¨ç»“æ„</text>
    <text x="20" y="42" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ sys_user - ç³»ç»Ÿç”¨æˆ·</text>
    <text x="20" y="56" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ sys_app - æ¥å…¥åº”ç”¨</text>
    <text x="20" y="70" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ sys_channel - æ¸ é“é…ç½®</text>
    <text x="20" y="84" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ sys_template - æ¶ˆæ¯æ¨¡æ¿</text>
    <text x="180" y="42" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ sys_recipient - æ¥æ”¶è€…</text>
    <text x="180" y="56" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ sys_recipient_group - æ¥æ”¶è€…åˆ†ç»„</text>
    <text x="180" y="70" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ log_msg_batch - æ¶ˆæ¯æ‰¹æ¬¡</text>
    <text x="180" y="84" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ log_msg_detail - æ¶ˆæ¯è¯¦æƒ…</text>
  </g>
  
  <!-- Legend -->
  <g transform="translate(50, 720)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1f1f1f">å›¾ä¾‹:</text>
    <rect x="50" y="-12" width="20" height="14" rx="2" fill="url(#blueGrad)"/>
    <text x="75" y="0" font-family="Arial, sans-serif" font-size="10" fill="#666">å®¢æˆ·ç«¯</text>
    <rect x="130" y="-12" width="20" height="14" rx="2" fill="url(#greenGrad)"/>
    <text x="155" y="0" font-family="Arial, sans-serif" font-size="10" fill="#666">æ•°æ®å­˜å‚¨</text>
    <rect x="220" y="-12" width="20" height="14" rx="2" fill="url(#purpleGrad)"/>
    <text x="245" y="0" font-family="Arial, sans-serif" font-size="10" fill="#666">æ¸ é“å¤„ç†</text>
    <rect x="320" y="-12" width="20" height="14" rx="2" fill="url(#orangeGrad)"/>
    <text x="345" y="0" font-family="Arial, sans-serif" font-size="10" fill="#666">ç¬¬ä¸‰æ–¹æœåŠ¡</text>
  </g>
  
  <!-- Version -->
  <text x="1150" y="780" text-anchor="end" font-family="Arial, sans-serif" font-size="9" fill="#bfbfbf">v1.0 | 2025-12-24</text>
</svg>
